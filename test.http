### Get access token with admin credentials

POST http://localhost:8181/realms/GamePlatform/protocol/openid-connect/token HTTP/1.1
Content-Type: application/x-www-form-urlencoded

client_id = backend &
client_secret = 0Ss74BU8bo5Xcq7p3SfxvYRyNmxtkB3E &
username = admin &
password = password &
grant_type = password &
scope = openid

//saving the access token
> {%
    client.global.set("access_token", response.body.access_token);
%}



### Create a new user in Keycloak (Register User)
POST http://localhost:8181/realms/GamePlatform/users
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "username": "newuser",
  "enabled": true,
  "emailVerified": true,
  "firstName": "New",
  "lastName": "User",
  "email": "newuser@example.com",
  "credentials": [{"type": "password", "value": "password"}]
}

### Add a game
POST http://localhost:8090/api/games/add
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "gameName": "Checkers",
  "description": "A classic board game",
  "price": 0.0
}

### Match players in a lobby if they are friends and dont have a match
POST http://localhost:8090/api/lobby/match/friend
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "playerId": "39b5b7d0-ab1e-11ef-9cd2-0242ac120001",
  "friendId": "39b5b7d0-ab1e-11ef-9cd2-0242ac120002",
  "gameId": "8cfeaa07-889e-43ee-90ea-a12e9e0e9012"
}


### Match a player with a random player in a lobby
POST http://localhost:8090/api/lobby/match/random
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "playerId": "39b5b7d0-ab1e-11ef-9cd2-0242ac120003",
   "gameId": "8cfeaa07-889e-43ee-90ea-a12e9e0e9012"
}

### Leave exiting lobby and create a new public lobby alone
POST http://localhost:8090/api/lobby/match/random
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "playerId": "39b5b7d0-ab1e-11ef-9cd2-0242ac120003",
  "gameId": "54155b2a-2882-4c47-bbc7-8095a8596a11"
}


### See if we can Match player 4 with either 3 or 7
POST http://localhost:8090/api/lobby/match/random
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "playerId": "39b5b7d0-ab1e-11ef-9cd2-0242ac120004",
    "gameId": "8cfeaa07-889e-43ee-90ea-a12e9e0e9012"
}

### See if Player 8 will now join who ever is still free
POST http://localhost:8090/api/lobby/match/random
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "playerId": "39b5b7d0-ab1e-11ef-9cd2-0242ac120008",
    "gameId": "54155b2a-2882-4c47-bbc7-8095a8596a11"
}


